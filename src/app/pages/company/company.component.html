<div class="flex flex-col align-middle text-white gap-4">
  <section class="text-lg font-semibold mt-2 border border-gray-500 p-1 rounded text-center">
    <p>Cadastro de Empresas</p>
  </section>
  <app-tab [arrayTabsTitle]="company().arrayTab" (selectedTabEmitter)="company().tabIndex = $event">
    <div class="flex items-center gap-10 mb-4">
      <app-input-addons
        class="flex-1"
        [optionList]="company().arraySelectFilter"
        [placeholder]="company().placeholderFilter"
        (inputValueEmitter)="company().inputValueFilter = $event"
        (selectValueEmitter)="company().selectValueFilter = $event"></app-input-addons>
      <div class="flex gap-3">
        <app-table-header-box></app-table-header-box>
        <app-button [showIcon]="true" [btnIcon]="'add'" [label]="'Cadastrar'"></app-button>
      </div>
    </div>
    <app-table>
      <tr thead-row>
        @for (header of company().tableHeaders; track $index) {
          @if (header.showHeader) {
            <th class="table-td">
              {{ header.name }}
            </th>
          }
        }
      </tr>
      @for (companyData of company().companiesData; track $index) {
        <tr tbody-row>
          @if (company().tableHeaders[0].showHeader) {
            <td class="table-td">
              {{ companyData.idCompany }}
            </td>
          }
          @if (company().tableHeaders[1].showHeader) {
            <td class="table-td">
              {{ companyData.date | date: 'dd/MM/YYYY' }}
            </td>
          }
          @if (company().tableHeaders[2].showHeader) {
            <td class="table-td">{{ companyData.nickname }}</td>
          }
          @if (company().tableHeaders[3].showHeader) {
            <td class="table-td">{{ companyData.name }}</td>
          }
          @if (company().tableHeaders[4].showHeader) {
            <td class="table-td">{{ companyData.cnpj }}</td>
          }
          @if (company().tableHeaders[5].showHeader) {
            <td class="table-td flex justify-center gap-3">
              <app-button
                (click)="showModalFormToEditCompany(companyData)"
                [showLabel]="false"
                [showIcon]="true"
                [btnType]="'warning'"></app-button>
              <app-button
                (click)="showModalAskToDeleteCompany(companyData)"
                [showLabel]="false"
                [showIcon]="true"
                [btnType]="'danger'"></app-button>
            </td>
          }
        </tr>
      }
    </app-table>
    <app-tab
      [arrayTabsTitle]="companyItem().arrayTab"
      [divClass]="'mt-5'"
      (selectedTabEmitter)="companyItem().tabIndex = $event">
      <div class="flex items-center justify-between gap-10 mb-4">
        <app-input-addons
          class="flex-1"
          [optionList]="companyItem().arraySelectFilter"
          [placeholder]="companyItem().placeholderFilter"
          (inputValueEmitter)="companyItem().inputValueFilter = $event"
          (selectValueEmitter)="companyItem().selectValueFilter = $event"></app-input-addons>
        <div class="flex gap-3">
          <app-table-header-box (click)="companyItem().isHeaderBoxActive"></app-table-header-box>
          <app-button [showIcon]="true" [btnIcon]="'add'" [label]="'Cadastrar'"></app-button>
        </div>
      </div>
      <app-table>
        <tr thead-row>
          @for (header of companyItem().tableHeaderSelected; track $index) {
            @if (header.showHeader) {
              <th class="table-td">
                {{ header.name }}
              </th>
            }
          }
        </tr>
        @for (dataSelected of companyItem().tableDataSelected; track $index) {
          <tr tbody-row>
            @if (isAdress(dataSelected)) {
              @if (companyItem().tableHeaderSelected[0].showHeader) {
                <td class="table-td">
                  {{ dataSelected.idAdress }}
                </td>
              }
              @if (companyItem().tableHeaderSelected[1].showHeader) {
                <td class="table-td">
                  {{ dataSelected.type }}
                </td>
              }
              @if (companyItem().tableHeaderSelected[2].showHeader) {
                <td class="table-td">{{ dataSelected.adress }}</td>
              }
              @if (companyItem().tableHeaderSelected[3].showHeader) {
                <td class="table-td">{{ dataSelected.number }}</td>
              }
              @if (companyItem().tableHeaderSelected[4].showHeader) {
                <td class="table-td">{{ dataSelected.complement }}</td>
              }
              @if (companyItem().tableHeaderSelected[4].showHeader) {
                <td class="table-td">{{ dataSelected.district }}</td>
              }
              @if (companyItem().tableHeaderSelected[4].showHeader) {
                <td class="table-td">{{ dataSelected.city }}</td>
              }
              @if (companyItem().tableHeaderSelected[4].showHeader) {
                <td class="table-td">{{ dataSelected.state }}</td>
              }
              @if (companyItem().tableHeaderSelected[5].showHeader) {
                <td class="table-td flex justify-center gap-3">
                  <app-button
                    (click)="showModalFormToEditCompany(dataSelected)"
                    [showLabel]="false"
                    [showIcon]="true"
                    [btnType]="'warning'"></app-button>
                  <app-button
                    (click)="showModalAskToDeleteCompany(dataSelected)"
                    [showLabel]="false"
                    [showIcon]="true"
                    [btnType]="'danger'"></app-button>
                </td>
              }
            }
          </tr>
        }
      </app-table>
    </app-tab>
  </app-tab>
</div>

<app-modal-form-company
  [isModalFormCompanyActive]="isModalCompanyActive"
  (closeModalFormEmitter)="isModalCompanyActive = false"></app-modal-form-company>
<app-modal-ask
  [showModal]="isModalAskActive"
  [modalDescription]="modalData.description"
  [modalType]="modalData.type"
  (cancelEmitter)="isModalAskActive = false"
  (actionOkEmitter)="OnModalAskActionOk()"></app-modal-ask>
<app-modal-check
  [companyData]="company().companyData"
  [isEditForm]="isEditForm"
  [isModalCheckActive]="isModalCheckActive"
  (closeModalCheckEmitter)="closeModalCheckEvent()"></app-modal-check>
<app-modal-info
  [showModal]="isModalInfoActive"
  [modalDescription]="modalData.description"
  [modalType]="modalData.type"
  (closeModalEmitter)="isModalInfoActive = false"></app-modal-info>
<app-loading [showLoading]="showLoading()"></app-loading>
